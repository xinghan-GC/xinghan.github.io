<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>STM32新建工程</title>
      <link href="/2025/01/31/2025-1-31/"/>
      <url>/2025/01/31/2025-1-31/</url>
      
        <content type="html"><![CDATA[<h1 id="一、stm32的开发方式"><a href="#一、stm32的开发方式" class="headerlink" title="一、stm32的开发方式"></a>一、stm32的开发方式</h1><ol><li>基于寄存器（由于stm32较为复杂不推荐此方法）</li><li>基于标准库（寄存器封装较好）</li><li>基于<a href="%E7%89%A9%E8%81%94%E7%BD%91%E5%B5%8C%E5%85%A5%E5%BC%8F">HAL库</a>（快速上手无法了解底层逻辑）<br><em>本次学习将采用标准库的方式来学习</em></li></ol><h1 id="二、库函数"><a href="#二、库函数" class="headerlink" title="二、库函数"></a>二、库函数</h1><ol><li>打开固件库</li><li>Libraries中的就是库函数的文件</li><li>Project是官方提供的示例（可以为使用库函数做参考）</li><li>Utilities是测试电路文件</li></ol><h1 id="三、新建文件夹"><a href="#三、新建文件夹" class="headerlink" title="三、新建文件夹"></a>三、新建文件夹</h1><h2 id="1、建立启动文件夹"><a href="#1、建立启动文件夹" class="headerlink" title="1、建立启动文件夹"></a>1、建立启动文件夹</h2><ul><li>打开Kiel 5，点击新建工程</li><li>创建文件夹<a href="%E7%89%A9%E8%81%94%E7%BD%91%E5%B5%8C%E5%85%A5%E5%BC%8F">STM32</a> ——2-1 STM32工程模板，创建Project工程文件</li><li>打开固件库（以下为需要的启动文件路径）STM32F10x_StdPeriph_Lib_V3.5.0\Libraries\CMSIS\CM3\DeviceSupport\ST\STM32F10x\startup\arm</li><li>将arm文件夹内的文件复制，并在工程模板文件夹内创建start文件夹粘贴</li><li>在STM32F10x文件夹中存放了stm32f10.h和两个system文件，前者为STM32的外设寄存器描述文件（类似于51单片机的头文件），后者主要用于配置时钟。将他们复制到start文件夹中</li><li>由于STM32是由内核和外围的设备组成，且不存放在一起，所以需要添加内核寄存器的描述文件，在固件库中按以下路径找到文件，并复制粘贴到start文件夹中<br>STM32F10x_StdPeriph_Lib_V3.5.0\Libraries\CMSIS\CM3\CoreSupport</li></ul><h2 id="2、添加启动文件"><a href="#2、添加启动文件" class="headerlink" title="2、添加启动文件"></a>2、添加启动文件</h2><ul><li>选中source group1文件夹，点击文件夹前面的图标，更改名字为start文件夹，右击添加已经存在的文件，将原来start文件夹中的startup_stm32f10x_md.s，core_cm3.c，core_cm3.h，stm32f10x.h，system_stm32f10x.c，system_stm32f10x.h文件添加其中（这些文件<em>只读</em>文件，无法修改其中的内容）</li><li>点击魔法棒按钮，在c&#x2F;c++中的Include Path中添加start文件夹（这样就可以保证头文件的路径）</li><li>新建User文件夹，创建main.c文件</li><li>工程选项，C&#x2F;C++，Define内定义USE_STDPERIPH_DRIVER(使用库函数必须定义)</li><li>写入一下代码</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stm32f10x.h&quot;</span>                  <span class="comment">// Device header</span></span></span><br><span class="line">     </span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line"> &#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"> &#125;   </span><br></pre></td></tr></table></figure><h2 id="3、启动文件分类"><a href="#3、启动文件分类" class="headerlink" title="3、启动文件分类"></a>3、启动文件分类</h2><table><thead><tr><th align="center">缩写</th><th align="center">释义</th><th align="center">Flash容量</th><th align="center">型号</th></tr></thead><tbody><tr><td align="center">LD_VL</td><td align="center">小容量产品超值系列</td><td align="center">16-32k</td><td align="center">STM32F100</td></tr><tr><td align="center">MD_VL</td><td align="center">中容量产品超值系列</td><td align="center">64-128k</td><td align="center">STM32F100</td></tr><tr><td align="center">HD_VL</td><td align="center">大容量产品超值系列</td><td align="center">256-512k</td><td align="center">STM32F100</td></tr><tr><td align="center">LD</td><td align="center">小容量产品</td><td align="center">16-32k</td><td align="center">STM32F101&#x2F;102&#x2F;103</td></tr><tr><td align="center">MD</td><td align="center">中容量产品</td><td align="center">64-128k</td><td align="center">STM32F101&#x2F;102&#x2F;103</td></tr><tr><td align="center">HD</td><td align="center">大容量产品</td><td align="center">256-512k</td><td align="center">STM32F101&#x2F;102&#x2F;103</td></tr><tr><td align="center">XL</td><td align="center">加大容量产品</td><td align="center">大于512k</td><td align="center">STM32F101&#x2F;102&#x2F;103</td></tr><tr><td align="center">CL</td><td align="center">互联型产品</td><td align="center">-</td><td align="center">STM32F105&#x2F;107</td></tr></tbody></table><h1 id="四、新建工程各文件作用"><a href="#四、新建工程各文件作用" class="headerlink" title="四、新建工程各文件作用"></a>四、新建工程各文件作用</h1><ul><li>start_xx.s：复位中断，相当于程序的入口，调用Systeminit，这个函数定义在system_xx.c&#x2F;.h里面，设置微控制器的启动，初始化嵌入式闪存接口、锁相环、更新系统内核的时钟变量。（在main函数启动之前全部执行）。还有其他中断的调用。</li><li>stm32f10_it.c&#x2F;.h：定义中断处理函数</li><li>stm32f10x.h：外设寄存器描述</li><li>core_cm3.c&#x2F;.h：内核寄存器描述</li><li>misc.c&#x2F;.h,stm32f10x_adc.c&#x2F;.h···：库函数</li><li>stm32f10x_conf.h：库函数配置</li></ul>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
